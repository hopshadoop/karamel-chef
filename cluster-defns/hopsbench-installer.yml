name: Hops

baremetal:
    username: __USER__

cookbooks:
  hopsworks:
    github: __GITHUB__
    branch: __BRANCH__

attrs:
  __DOWNLOAD__
  install:
    dir: /srv/hops
    cloud: __CLOUD__
    kubernetes: __KUBE__
    __ENTERPRISE__
  __CUDA__
  hops:
    tls:
      enabled: __TLS__
    __YARN__
      vcores: __CPUS__
      memory_mbs: __MEM__
      detect-hardware-capabilities: false
      aux_services: mapreduce_shuffle      
    rmappsecurity:
      actor_class: "org.apache.hadoop.yarn.server.resourcemanager.security.DevHopsworksRMAppSecurityActions"
    nn:
      heap_size: "10000"
      direct_memory_size: "10000"
      handler_count: 240
  kagent:
    python_conda_versions: 3.6
    enabled: false
  ndb:
    nvme:
      disks: ["/dev/nvme0n1"]
      format: true
      logfile_size: 100000M
      undofile_size: 1000M
#    ThreadConfig: "main={count=1,cpubind=0},io={count=1,cpubind=1},rep={count=1,cpubind=1},recv={count=3,cpubind=2-4},send={count=2,cpubind=5-6},ldm={count=12,cpubind=7-18},tc={count=7,cpubind=19-25}"
    NoOfFragmentLogParts: 6
    NoOfReplicas: 1
    FragmentLogFileSize: "256M"
    SharedGlobalMemory: "512M"
    DiskIOThreadPool: 12
    DiskPageBufferMemory: "512M"
    DataMemory: 8192M    
    MaxNoOfConcurrentTransactions: 100000
    MaxNoOfConcurrentOperations: 1000000
    MaxNoOfConcurrentIndexOperations: 30000
    MaxNoOfConcurrentScans: 500
  mysql:
      password: __PWD___202      
groups:
  metaserver:
    size: 1
    baremetal:
      ip: __IP__
    recipes:
      - hops::rm
      - hops::nn
      - hops::jhs
      - hops::ndb
      - ndb::mgmd
      - ndb::mysqld
      - hops::client
      - hopsbench::master
      - hopsbench::slave
